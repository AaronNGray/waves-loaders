!function(a){if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define(a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.createBufferLoader=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){var c=function(){"use strict";var a={load:{enumerable:!0,value:function(a){return Array.isArray(a)?this.loadAll(a):this.loadBuffer(a)}},loadBuffer:{enumerable:!0,value:function(a){return this.fileLoadingRequest(a).then(this.decodeAudioData,function(a){throw a})}},loadAll:{enumerable:!0,value:function(a){for(var b=a.length,c=[],d=this,e=0;b>e;++e)c.push(this.fileLoadingRequest(a[e]));return Q.all(c).then(function(a){return Q.all(a.map(function(a){return d.decodeAudioData(a)}))},function(a){throw a},function(a){return a})}},fileLoadingRequest:{enumerable:!1,value:function(a){{var b=Q.defer();new Q.fcall(function(){var c=new XMLHttpRequest;c.open("GET",a,!0),c.responseType="arraybuffer",c.onload=function(){200===c.status||304===c.status?b.resolve(c.response):b.reject(new Error(c.statusText))},c.onprogress=function(a){b.notify(a.loaded/a.total)},c.onerror=function(){b.reject(new Error("Network Error"))},c.send()})}return b.promise}},decodeAudioData:{enumerable:!1,value:function(a){{var b=Q.defer();new Q.fcall(function(){window.audioContext.decodeAudioData(a,function(a){b.resolve(a)},function(){b.reject(new Error("DecodeAudioData error"))})})}return b.promise}}},b=Object.create({},a);return b};b.exports=c},{}]},{},[1])(1)});