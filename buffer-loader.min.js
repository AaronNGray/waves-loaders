!function(a){if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define(a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.createBufferLoader=a()}}(function(){var a;return function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};a[g][0].call(j.exports,function(b){var c=a[g][1][b];return e(c?c:b)},j,j.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){var c=a("native-promise-only"),d=function(){"use strict";window.audioContext=window.audioContext||new AudioContext||new webkitAudioContext;var a={load:{enumerable:!0,value:function(a){return Array.isArray(a)?this.loadAll(a):this.loadBuffer(a)}},loadBuffer:{enumerable:!0,value:function(a){return this.fileLoadingRequest(a).then(this.decodeAudioData,function(a){throw a})}},loadAll:{enumerable:!0,value:function(a){for(var b=a.length,d=[],e=this,f=0;b>f;++f)d.push(this.fileLoadingRequest(a[f],f));return c.all(d).then(function(a){return c.all(a.map(function(a){return e.decodeAudioData(a)}))},function(a){throw a})}},fileLoadingRequest:{enumerable:!1,value:function(a,b){var d=this,e=new c(function(c,e){var f=new XMLHttpRequest;f.open("GET",a,!0),f.responseType="arraybuffer",f.onload=function(){200===f.status||304===f.status?c(f.response):e(new Error(f.statusText))},f.onprogress=function(a){d.progressCallback&&d.progressCallback(void 0!==b?{index:b,value:a.loaded/a.total}:a.loaded/a.total)},f.onerror=function(){e(new Error("Network Error"))},f.send()});return e}},decodeAudioData:{enumerable:!1,value:function(a){var b=new c(function(b,c){window.audioContext.decodeAudioData(a,function(a){b(a)},function(){c(new Error("DecodeAudioData error"))})});return b}},progressCallback:{get:function(){return this.progressCb},set:function(a){this.progressCb=a}}},b=Object.create({progressCb:void 0},a);return b};b.exports=d},{"native-promise-only":2}],2:[function(b,c){(function(b){!function(b,d,e){d[b]=d[b]||e(),"undefined"!=typeof c&&c.exports?c.exports=d[b]:"function"==typeof a&&a.amd&&a(function(){return d[b]})}("Promise","undefined"!=typeof b?b:this,function(){"use strict";function a(){function a(a,b){this.fn=a,this.self=b,this.next=void 0}var b,c,d;return{add:function(e,f){d=new a(e,f),c?c.next=d:b=d,c=d,d=void 0},drain:function(){var a=b;for(b=c=n=null;a;)a.fn.call(a.self),a=a.next}}}function b(a,b){p?(p=!1,a.call(b)):(o.add(a,b),n||(n=q(o.drain)))}function c(a){var b,c=typeof a;return null===a||"object"!==c&&"function"!==c||(b=a.then),"function"==typeof b?b:!1}function d(){var a,b,c,d=this;if(0===d.state)return p=!1;for(c=0;c<d.chain.length;c++)b=d.chain[c],a=1===d.state?b.success:b.failure,e(d,a,b);d.chain.length=0}function e(a,b,d){var e,f;try{b===!1?(p=!0,d.reject(a.msg)):(e=b===!0?a.msg:b.call(void 0,a.msg),p=!0,e===d.promise?d.reject(TypeError("Promise-chain cycle")):(f=c(e))?f.call(e,d.resolve,d.reject):d.resolve(e))}catch(g){p=!0,d.reject(g)}}function f(a){if(a.def){if(a.triggered)return p=!1;a.triggered=!0,a=a.def}return 0!==a.state?p=!1:a}function g(a){var e,i,j=f(this);if(j!==!1)try{(e=c(a))?(i=new k(j),e.call(a,function(){g.apply(i,arguments)},function(){h.apply(i,arguments)})):(j.msg=a,j.state=1,b(d,j))}catch(l){h.call(i||new k(j),l)}}function h(a){var c=f(this);c!==!1&&(c.msg=a,c.state=2,b(d,c))}function i(a,b){p=!0,a(b)}function j(a,b,c,d){for(var e=0;e<b.length;e++)!function(e){a.resolve(b[e]).then(function(a){c(e,a)},d)}(e)}function k(a){this.def=a,this.triggered=!1}function l(a){this.promise=a,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function m(a){if("function"!=typeof a)throw TypeError("Not a function");var c=this,e=new l(c);c.then=function(a,c){var f={success:"function"==typeof a?a:!0,failure:"function"==typeof c?c:!1};return f.promise=new this.constructor(function(a,b){if("function"!=typeof(a&&b))throw TypeError("Not a function");f.resolve=a,f.reject=b}),e.chain.push(f),b(d,e),f.promise},c["catch"]=function(a){return e.promise.then.call(this,void 0,a)};try{a.call(void 0,function(a){return e.triggered?void(p=!1):(e.triggered=!0,void g.call(e,a))},function(a){return e.triggered?void(p=!1):(e.triggered=!0,void h.call(e,a))})}catch(f){h.call(e,f)}}var n,o,p=!1,q="undefined"!=typeof setImmediate?function(a){return setImmediate(a)}:setTimeout,r=Object.defineProperty?function(a,b,c,d){return Object.defineProperty(a,b,{value:c,writable:!0,configurable:d!==!1})}:function(a,b,c){return a[b]=c,a};return o=a(),r(m,"prototype",r({},"constructor",m),!1),r(m,"resolve",function(a){var c=this;return"object"==typeof a&&a instanceof c?a:new c(function(c,d){if("function"!=typeof(c&&d))throw TypeError("Not a function");b(function(){i(c,a)})})}),r(m,"reject",function(a){return new this(function(b,c){if("function"!=typeof(b&&c))throw TypeError("Not a function");c(a)})}),r(m,"all",function(a){var b=this;return Array.isArray(a)?0===a.length?b.resolve([]):new b(function(c,d){if("function"!=typeof(c&&d))throw TypeError("Not a function");var e=a.length,f=Array(e),g=0;j(b,a,function(a,b){f[a]=b,++g===e&&i(c,f)},d)}):b.reject(TypeError("Not an array"))}),r(m,"race",function(a){var b=this;return Array.isArray(a)?new b(function(c,d){if("function"!=typeof(c&&d))throw TypeError("Not a function");j(b,a,function(a,b){i(c,b)},d)}):b.reject(TypeError("Not an array"))}),m})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)});