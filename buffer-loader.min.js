!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.BufferLoader=e()}}(function(){var e;return function t(e,n,r){function i(s,u){if(!n[s]){if(!e[s]){var f="function"==typeof require&&require;if(!u&&f)return f(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var a=n[s]={exports:{}};e[s][0].call(a.exports,function(t){var n=e[s][1][t];return i(n?n:t)},a,a.exports,t,e,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t){"use strict";e("audio-context"),e("native-promise-only");var n=e("events"),r=function(e){function t(){e.call(this),this.progressCb=void 0}function n(){return this.progressCb}function r(e){this.progressCb=e}var i=Object.defineProperty,o=function(e,t){for(var n in t)t.hasOwnProperty(n)&&i(e,n,Object.getOwnPropertyDescriptor(t,n));return e};return o(t,e),t.prototype=Object.create(e.prototype,{constructor:{value:t,configurable:!0,writable:!0},progressCallback:{get:n,set:r,configurable:!0,enumerable:!0}}),i(t,"prototype",{configurable:!1,enumerable:!1,writable:!1}),t.prototype.load=function(e){return Array.isArray(e)?this.loadAll(e):this.loadBuffer(e)},t.prototype.loadBuffer=function(e){return this.fileLoadingRequest(e).then(this.decodeAudioData,function(e){throw e})},t.prototype.loadAll=function(e){for(var t=e.length,n=[],r=this,i=0;t>i;++i)n.push(this.fileLoadingRequest(e[i],i));return Promise.all(n).then(function(e){return Promise.all(e.map(function(e){return r.decodeAudioData(e)}))},function(e){throw e})},t.prototype.fileLoadingRequest=function(e,t){var n=this,r=new Promise(function(r,i){var o=new XMLHttpRequest;o.open("GET",e,!0),o.index=t,n.emit("xmlhttprequest",o),o.responseType="arraybuffer",o.addEventListener("load",function(){200===o.status||304===o.status?r(o.response):i(new Error(o.statusText))}),o.addEventListener("progress",function(e){n.progressCallback&&n.progressCallback(void 0!==t?{index:t,value:e.loaded/e.total}:e.loaded/e.total)}),o.addEventListener("error",function(){i(new Error("Network Error"))}),o.send()});return r},t.prototype.decodeAudioData=function(e){var t=new Promise(function(t,n){window.audioContext.decodeAudioData(e,function(e){t(e)},function(){n(new Error("DecodeAudioData error"))})});return t},t}(n.EventEmitter);t.exports=r},{"audio-context":2,events:3,"native-promise-only":4}],2:[function(e,t){var n=window.audioContext||new AudioContext;window.audioContext=n,t.exports=n},{}],3:[function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,u,f,a;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length))throw t=arguments[1],t instanceof Error?t:TypeError('Uncaught, unspecified "error" event.');if(n=this._events[e],s(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,u=new Array(i-1),f=1;i>f;f++)u[f-1]=arguments[f];n.apply(this,u)}else if(o(n)){for(i=arguments.length,u=new Array(i-1),f=1;i>f;f++)u[f-1]=arguments[f];for(a=n.slice(),i=a.length,f=0;i>f;f++)a[f].apply(this,u)}return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned){var i;i=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,s,u;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(u=s;u-->0;)if(n[u]===t||n[u].listener&&n[u].listener===t){i=u;break}if(0>i)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?r(e._events[t])?1:e._events[t].length:0}},{}],4:[function(t,n){(function(t){!function(t,r,i){r[t]=r[t]||i(),"undefined"!=typeof n&&n.exports?n.exports=r[t]:"function"==typeof e&&e.amd&&e(function(){return r[t]})}("Promise","undefined"!=typeof t?t:this,function(){"use strict";function e(e,t){l.add(e,t),h||(h=v(l.drain))}function t(e){var t,n=typeof e;return null==e||"object"!=n&&"function"!=n||(t=e.then),"function"==typeof t?t:!1}function n(){for(var e=0;e<this.chain.length;e++)r(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function r(e,n,r){var i,o;try{n===!1?r.reject(e.msg):(i=n===!0?e.msg:n.call(void 0,e.msg),i===r.promise?r.reject(TypeError("Promise-chain cycle")):(o=t(i))?o.call(i,r.resolve,r.reject):r.resolve(i))}catch(s){r.reject(s)}}function i(r){var s,f,a=this;if(!a.triggered){a.triggered=!0,a.def&&(a=a.def);try{(s=t(r))?(f=new u(a),s.call(r,function(){i.apply(f,arguments)},function(){o.apply(f,arguments)})):(a.msg=r,a.state=1,a.chain.length>0&&e(n,a))}catch(c){o.call(f||new u(a),c)}}}function o(t){var r=this;r.triggered||(r.triggered=!0,r.def&&(r=r.def),r.msg=t,r.state=2,r.chain.length>0&&e(n,r))}function s(e,t,n,r){for(var i=0;i<t.length;i++)!function(i){e.resolve(t[i]).then(function(e){n(i,e)},r)}(i)}function u(e){this.def=e,this.triggered=!1}function f(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function a(t){if("function"!=typeof t)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var r=new f(this);this.then=function(t,i){var o={success:"function"==typeof t?t:!0,failure:"function"==typeof i?i:!1};return o.promise=new this.constructor(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");o.resolve=e,o.reject=t}),r.chain.push(o),0!==r.state&&e(n,r),o.promise},this["catch"]=function(e){return this.then(void 0,e)};try{t.call(void 0,function(e){i.call(r,e)},function(e){o.call(r,e)})}catch(s){o.call(r,s)}}var c,h,l,p=Object.prototype.toString,v="undefined"!=typeof setImmediate?function(e){return setImmediate(e)}:setTimeout;try{Object.defineProperty({},"x",{}),c=function(e,t,n,r){return Object.defineProperty(e,t,{value:n,writable:!0,configurable:r!==!1})}}catch(d){c=function(e,t,n){return e[t]=n,e}}l=function(){function e(e,t){this.fn=e,this.self=t,this.next=void 0}var t,n,r;return{add:function(i,o){r=new e(i,o),n?n.next=r:t=r,n=r,r=void 0},drain:function(){var e=t;for(t=n=h=void 0;e;)e.fn.call(e.self),e=e.next}}}();var y=c({},"constructor",a,!1);return c(a,"prototype",y,!1),c(y,"__NPO__",0,!1),c(a,"resolve",function(e){var t=this;return e&&"object"==typeof e&&1===e.__NPO__?e:new t(function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");t(e)})}),c(a,"reject",function(e){return new this(function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");n(e)})}),c(a,"all",function(e){var t=this;return"[object Array]"!=p.call(e)?t.reject(TypeError("Not an array")):0===e.length?t.resolve([]):new t(function(n,r){if("function"!=typeof n||"function"!=typeof r)throw TypeError("Not a function");var i=e.length,o=Array(i),u=0;s(t,e,function(e,t){o[e]=t,++u===i&&n(o)},r)})}),c(a,"race",function(e){var t=this;return"[object Array]"!=p.call(e)?t.reject(TypeError("Not an array")):new t(function(n,r){if("function"!=typeof n||"function"!=typeof r)throw TypeError("Not a function");s(t,e,function(e,t){n(t)},r)})}),a})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)});