!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.BufferLoader=t()}}(function(){var t;return function e(t,n,o){function r(f,u){if(!n[f]){if(!t[f]){var c="function"==typeof require&&require;if(!u&&c)return c(f,!0);if(i)return i(f,!0);throw new Error("Cannot find module '"+f+"'")}var a=n[f]={exports:{}};t[f][0].call(a.exports,function(e){var n=t[f][1][e];return r(n?n:e)},a,a.exports,e,t,n,o)}return n[f].exports}for(var i="function"==typeof require&&require,f=0;f<o.length;f++)r(o[f]);return r}({1:[function(t,e){"use strict";t("audio-context"),t("native-promise-only");var n=function(){function t(){this.progressCb=void 0}function e(){return this.progressCb}function n(t){this.progressCb=t}var o=Object.defineProperty;return Object.defineProperties(t.prototype,{progressCallback:{get:e,set:n,configurable:!0,enumerable:!0}}),o(t,"prototype",{configurable:!1,enumerable:!1,writable:!1}),t.prototype.load=function(t){return Array.isArray(t)?this.loadAll(t):this.loadBuffer(t)},t.prototype.loadBuffer=function(t){return this.fileLoadingRequest(t).then(this.decodeAudioData,function(t){throw t})},t.prototype.loadAll=function(t){for(var e=t.length,n=[],o=this,r=0;e>r;++r)n.push(this.fileLoadingRequest(t[r],r));return Promise.all(n).then(function(t){return Promise.all(t.map(function(t){return o.decodeAudioData(t)}))},function(t){throw t})},t.prototype.fileLoadingRequest=function(t,e){var n=this,o=new Promise(function(o,r){var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer",i.onload=function(){200===i.status||304===i.status?o(i.response):r(new Error(i.statusText))},i.onprogress=function(t){n.progressCallback&&n.progressCallback(void 0!==e?{index:e,value:t.loaded/t.total}:t.loaded/t.total)},i.onerror=function(){r(new Error("Network Error"))},i.send()});return o},t.prototype.decodeAudioData=function(t){var e=new Promise(function(e,n){window.audioContext.decodeAudioData(t,function(t){e(t)},function(){n(new Error("DecodeAudioData error"))})});return e},t}();e.exports=n},{"audio-context":2,"native-promise-only":3}],2:[function(t,e){var n=window.audioContext||new AudioContext;window.audioContext=n,e.exports=n},{}],3:[function(e,n){(function(e){!function(e,o,r){o[e]=o[e]||r(),"undefined"!=typeof n&&n.exports?n.exports=o[e]:"function"==typeof t&&t.amd&&t(function(){return o[e]})}("Promise","undefined"!=typeof e?e:this,function(){"use strict";function t(t,e){d.add(t,e),l||(l=h(d.drain))}function e(t){var e,n=typeof t;return null==t||"object"!=n&&"function"!=n||(e=t.then),"function"==typeof e?e:!1}function n(){for(var t=0;t<this.chain.length;t++)o(this,1===this.state?this.chain[t].success:this.chain[t].failure,this.chain[t]);this.chain.length=0}function o(t,n,o){var r,i;try{n===!1?o.reject(t.msg):(r=n===!0?t.msg:n.call(void 0,t.msg),r===o.promise?o.reject(TypeError("Promise-chain cycle")):(i=e(r))?i.call(r,o.resolve,o.reject):o.resolve(r))}catch(f){o.reject(f)}}function r(o){var f,c,a=this;if(!a.triggered){a.triggered=!0,a.def&&(a=a.def);try{(f=e(o))?(c=new u(a),f.call(o,function(){r.apply(c,arguments)},function(){i.apply(c,arguments)})):(a.msg=o,a.state=1,a.chain.length>0&&t(n,a))}catch(s){i.call(c||new u(a),s)}}}function i(e){var o=this;o.triggered||(o.triggered=!0,o.def&&(o=o.def),o.msg=e,o.state=2,o.chain.length>0&&t(n,o))}function f(t,e,n,o){for(var r=0;r<e.length;r++)!function(r){t.resolve(e[r]).then(function(t){n(r,t)},o)}(r)}function u(t){this.def=t,this.triggered=!1}function c(t){this.promise=t,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function a(e){if("function"!=typeof e)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var o=new c(this);this.then=function(e,r){var i={success:"function"==typeof e?e:!0,failure:"function"==typeof r?r:!1};return i.promise=new this.constructor(function(t,e){if("function"!=typeof t||"function"!=typeof e)throw TypeError("Not a function");i.resolve=t,i.reject=e}),o.chain.push(i),0!==o.state&&t(n,o),i.promise},this["catch"]=function(t){return this.then(void 0,t)};try{e.call(void 0,function(t){r.call(o,t)},function(t){i.call(o,t)})}catch(f){i.call(o,f)}}var s,l,d,p=Object.prototype.toString,h="undefined"!=typeof setImmediate?function(t){return setImmediate(t)}:setTimeout;try{Object.defineProperty({},"x",{}),s=function(t,e,n,o){return Object.defineProperty(t,e,{value:n,writable:!0,configurable:o!==!1})}}catch(y){s=function(t,e,n){return t[e]=n,t}}d=function(){function t(t,e){this.fn=t,this.self=e,this.next=void 0}var e,n,o;return{add:function(r,i){o=new t(r,i),n?n.next=o:e=o,n=o,o=void 0},drain:function(){var t=e;for(e=n=l=void 0;t;)t.fn.call(t.self),t=t.next}}}();var v=s({},"constructor",a,!1);return s(a,"prototype",v,!1),s(v,"__NPO__",0,!1),s(a,"resolve",function(t){var e=this;return t&&"object"==typeof t&&1===t.__NPO__?t:new e(function(e,n){if("function"!=typeof e||"function"!=typeof n)throw TypeError("Not a function");e(t)})}),s(a,"reject",function(t){return new this(function(e,n){if("function"!=typeof e||"function"!=typeof n)throw TypeError("Not a function");n(t)})}),s(a,"all",function(t){var e=this;return"[object Array]"!=p.call(t)?e.reject(TypeError("Not an array")):0===t.length?e.resolve([]):new e(function(n,o){if("function"!=typeof n||"function"!=typeof o)throw TypeError("Not a function");var r=t.length,i=Array(r),u=0;f(e,t,function(t,e){i[t]=e,++u===r&&n(i)},o)})}),s(a,"race",function(t){var e=this;return"[object Array]"!=p.call(t)?e.reject(TypeError("Not an array")):new e(function(n,o){if("function"!=typeof n||"function"!=typeof o)throw TypeError("Not a function");f(e,t,function(t,e){n(e)},o)})}),a})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)});